<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of RearrangeStudies2Neurons</title>
  <meta name="keywords" content="RearrangeStudies2Neurons">
  <meta name="description" content="% data_out = RearrangeStudies2Cells(data,'option',value)">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>
<!-- menu.html functions -->
<h1>RearrangeStudies2Neurons
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>% data_out = RearrangeStudies2Cells(data,'option',value)</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>function data_out = RearrangeStudies2Neurons(data) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre class="comment">% data_out = RearrangeStudies2Cells(data,'option',value)
 Takes a DynaSim data structure that is the result of a parameter sweep and
 rearranges it into a single (1D) data structure. Each &quot;neuron&quot; in this new
 data structure corresponds to a simulation in the original sim study.

 If there is more than one cell in a population, each trace will represent the 
 averaged activity across neurons.
 
 This is useful when you want to run multiple simulations and see how 
 the averaged responses of populations vary. It is also useful when running
 the same simulation multiple times (with different) seed values and then
 observing the variance across these sims.
 
 Inputs:
   data - DynaSim data structure array (see CheckData). Length(data)
   should be greater than 1.
 Outputs:
   data_out: data structure of length 1. 
 
 Example:
 data = RearrangeStudies2Cells(data)
 PlotData(data)</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="CalcAverages.html" class="code" title="function data_out = CalcAverages(data,opts)">CalcAverages</a>	CALCAVERAGES - Average fields in a DynaSim data struct across neurons</li><li><a href="CheckData.html" class="code" title="function data=CheckData(data)">CheckData</a>	CHECKDATA - Standardize data structure and auto-populate missing fields</li></ul>
This function is called by:
<ul style="list-style-image:url(../matlabicon.gif)">
</ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function data_out = RearrangeStudies2Neurons(data)</a>
0002 <span class="comment">%% data_out = RearrangeStudies2Cells(data,'option',value)</span>
0003 <span class="comment">% Takes a DynaSim data structure that is the result of a parameter sweep and</span>
0004 <span class="comment">% rearranges it into a single (1D) data structure. Each &quot;neuron&quot; in this new</span>
0005 <span class="comment">% data structure corresponds to a simulation in the original sim study.</span>
0006 <span class="comment">%</span>
0007 <span class="comment">% If there is more than one cell in a population, each trace will represent the</span>
0008 <span class="comment">% averaged activity across neurons.</span>
0009 <span class="comment">%</span>
0010 <span class="comment">% This is useful when you want to run multiple simulations and see how</span>
0011 <span class="comment">% the averaged responses of populations vary. It is also useful when running</span>
0012 <span class="comment">% the same simulation multiple times (with different) seed values and then</span>
0013 <span class="comment">% observing the variance across these sims.</span>
0014 <span class="comment">%</span>
0015 <span class="comment">% Inputs:</span>
0016 <span class="comment">%   data - DynaSim data structure array (see CheckData). Length(data)</span>
0017 <span class="comment">%   should be greater than 1.</span>
0018 <span class="comment">% Outputs:</span>
0019 <span class="comment">%   data_out: data structure of length 1.</span>
0020 <span class="comment">%</span>
0021 <span class="comment">% Example:</span>
0022 <span class="comment">% data = RearrangeStudies2Cells(data)</span>
0023 <span class="comment">% PlotData(data)</span>
0024 <span class="comment">%</span>
0025 
0026 <span class="comment">% See also: CalcAverages, AnalyzeStudy, SimulateModel, CheckData, SelectVariables</span>
0027 
0028 <span class="comment">%% 1.0 Check inputs</span>
0029 
0030 data = <a href="CheckData.html" class="code" title="function data=CheckData(data)">CheckData</a>(data);
0031 <span class="comment">% note: calling CheckData() at beginning enables analysis function to</span>
0032 <span class="comment">% accept data matrix [time x cells] in addition to DynaSim data structure.</span>
0033 
0034 <span class="comment">%% Average all cells together if necessary</span>
0035 
0036 data = <a href="CalcAverages.html" class="code" title="function data_out = CalcAverages(data,opts)">CalcAverages</a>(data);
0037 
0038 <span class="comment">%% Compress data structure array into a single structure</span>
0039 
0040 
0041 <span class="comment">% Identify all fields in data containing simulated output</span>
0042 labels = data(1).labels;
0043 labels = labels(~strcmp(labels,<span class="string">'time'</span>));
0044 
0045 
0046 <span class="comment">% Initialize data_out</span>
0047 data_out.labels = data(1).labels;
0048 data_out.model = data(1).model;
0049 data_out.simulator_options = data(1).simulator_options;
0050 <span class="keyword">if</span> isfield(data(1),<span class="string">'time'</span>)
0051     data_out.time = data(1).time;
0052 <span class="keyword">end</span>
0053 
0054 <span class="comment">% Initialize other fields to empty matrices.</span>
0055 <span class="keyword">for</span> j = 1:length(labels)
0056     data_out.(labels{j}) = [];
0057 <span class="keyword">end</span>
0058 
0059 <span class="comment">% Move the averages from data into data_out</span>
0060 <span class="keyword">for</span> i = 1:length(data)
0061     <span class="keyword">for</span> j = 1:length(labels)
0062         <span class="comment">% Add ith simulation result for as a new neuron for label(j);</span>
0063         data_out(1).(labels{j}) = cat(2,data_out(1).(labels{j}), data(i).(labels{j}));      
0064     <span class="keyword">end</span>
0065     
0066 <span class="keyword">end</span>
0067 
0068 <span class="comment">% Update number of cells in each population to correspond to the total number of</span>
0069 <span class="comment">% sims in the original SimStudy parameter sweep</span>
0070 <span class="keyword">for</span> i = 1:length(data_out.model.specification.populations)
0071     data_out.model.specification.populations(i).size = length(data);
0072 <span class="keyword">end</span>
0073 
0074 
0075 
0076 
0077 
0078 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Fri 24-Feb-2017 14:46:35 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2005</address>
</body>
</html>