<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of UpdateStudy</title>
  <meta name="keywords" content="UpdateStudy">
  <meta name="description" content="% studyinfo=UpdateStudy(study_dir,varargin)">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>
<!-- menu.html functions -->
<h1>UpdateStudy
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>% studyinfo=UpdateStudy(study_dir,varargin)</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>function studyinfo=UpdateStudy(study_dir,varargin) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre class="comment">% studyinfo=UpdateStudy(study_dir,varargin)
 purpose: helper function to keep track of study metadata when anything is
 saved. only updates simulation-specific info.
   - Update DynaSim studyinfo structure
   - Tracks status of simulations [and analyses]
   - Manage queue for simultaneous processes updating studyinfo structure
 inputs:
   - study_dir
   - options:
     - ...
 outputs:
   - studyinfo
 
 NOTE: this function is not intended for users. it is an internal function
 called by functions like SimulateModel, AnalyzeStudy, and CreateBatch.
 
 See also: <a href="CheckStudyinfo.html" class="code" title="function studyinfo=CheckStudyinfo(studyinfo,varargin)">CheckStudyinfo</a>, <a href="SetupStudy.html" class="code" title="function [studyinfo,options]=SetupStudy(base_model,varargin)">SetupStudy</a>, <a href="SimulateModel.html" class="code" title="function [data,studyinfo]=SimulateModel(model,varargin)">SimulateModel</a>, <a href="CreateBatch.html" class="code" title="function studyinfo=CreateBatch(base_model,modifications_set,varargin)">CreateBatch</a>, <a href="AnalyzeStudy.html" class="code" title="function [results,studyinfo]=AnalyzeStudy(data,func,varargin)">AnalyzeStudy</a></pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="CheckOptions.html" class="code" title="function parms = CheckOptions(options, options_schema, strict)">CheckOptions</a>	CHECKOPTIONS - organize key/value pairs in structure with default or user-supplied values according to a schema</li><li><a href="CheckStudyinfo.html" class="code" title="function studyinfo=CheckStudyinfo(studyinfo,varargin)">CheckStudyinfo</a>	CHECKSTUDYINFO - Standardize studyinfo structure and auto-populate missing fields</li><li><a href="DisplayError.html" class="code" title="function DisplayError(err)">DisplayError</a>	</li><li><a href="StudyinfoIO.html" class="code" title="function studyinfo=StudyinfoIO(studyinfo,study_file,id,verbose_flag)">StudyinfoIO</a>	Usage:</li></ul>
This function is called by:
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="SimulateModel.html" class="code" title="function [data,studyinfo]=SimulateModel(model,varargin)">SimulateModel</a>	% data=SimulateModel(model,'option',value,...)</li></ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function studyinfo=UpdateStudy(study_dir,varargin)</a>
0002 <span class="comment">%% studyinfo=UpdateStudy(study_dir,varargin)</span>
0003 <span class="comment">% purpose: helper function to keep track of study metadata when anything is</span>
0004 <span class="comment">% saved. only updates simulation-specific info.</span>
0005 <span class="comment">%   - Update DynaSim studyinfo structure</span>
0006 <span class="comment">%   - Tracks status of simulations [and analyses]</span>
0007 <span class="comment">%   - Manage queue for simultaneous processes updating studyinfo structure</span>
0008 <span class="comment">% inputs:</span>
0009 <span class="comment">%   - study_dir</span>
0010 <span class="comment">%   - options:</span>
0011 <span class="comment">%     - ...</span>
0012 <span class="comment">% outputs:</span>
0013 <span class="comment">%   - studyinfo</span>
0014 <span class="comment">%</span>
0015 <span class="comment">% NOTE: this function is not intended for users. it is an internal function</span>
0016 <span class="comment">% called by functions like SimulateModel, AnalyzeStudy, and CreateBatch.</span>
0017 <span class="comment">%</span>
0018 <span class="comment">% See also: CheckStudyinfo, SetupStudy, SimulateModel, CreateBatch, AnalyzeStudy</span>
0019 
0020 <span class="comment">% note: this function should only update metadata stored in the</span>
0021 <span class="comment">% studyinfo.simulations substructure.</span>
0022 
0023 <span class="comment">% check inputs</span>
0024 options=<a href="CheckOptions.html" class="code" title="function parms = CheckOptions(options, options_schema, strict)">CheckOptions</a>(varargin,{<span class="keyword">...</span>
0025   <span class="string">'process_id'</span>,[],[],<span class="keyword">...</span><span class="comment"> % identifier for simulation to update</span>
0026   <span class="string">'status'</span>,[],[],<span class="keyword">...</span><span class="comment"> % status of simulation</span>
0027   <span class="string">'modifications_set'</span>,[],[],<span class="keyword">...</span><span class="comment"> % search space</span>
0028   <span class="string">'model'</span>,[],[],<span class="keyword">...</span><span class="comment"> % base_model or modified_model</span>
0029   <span class="string">'simulator_options'</span>,[],[],<span class="keyword">...</span><span class="comment"> % base_simulator_options</span>
0030   <span class="string">'solve_file'</span>,[],[],<span class="keyword">...</span><span class="comment"> % m- or mex-file solving the system</span>
0031   <span class="string">'prefix'</span>,<span class="string">'study'</span>,[],<span class="keyword">...</span><span class="comment"> % prefix prepended to all output files</span>
0032   <span class="string">'email'</span>,[],[],<span class="keyword">...</span><span class="comment"> % email to send notification upon study completion</span>
0033   <span class="string">'verbose_flag'</span>,0,{0,1},<span class="keyword">...</span>
0034   <span class="string">'duration'</span>,[],[],<span class="keyword">...</span><span class="comment"> % process duration</span>
0035   },false);
0036 <span class="comment">%   'base_data_files',[],[],... % base data files to analyze</span>
0037 <span class="comment">%   'project_id',[],[],... % unique identifier of parent project</span>
0038 
0039 <span class="comment">% load most recent version of studyinfo structure from file</span>
0040 studyinfo=<a href="CheckStudyinfo.html" class="code" title="function studyinfo=CheckStudyinfo(studyinfo,varargin)">CheckStudyinfo</a>(study_dir,<span class="string">'process_id'</span>,options.process_id);
0041 already_finished = all(strcmp(<span class="string">'finished'</span>,{studyinfo.simulations.status}));
0042 
0043 <span class="comment">% track status of simulations and analyses</span>
0044 <span class="comment">% index to this simulation in studyinfo</span>
0045 sim_ind=find([studyinfo.simulations.sim_id]==options.process_id);
0046 <span class="comment">% update studyinfo.simulations</span>
0047 <span class="comment">% update basic fields</span>
0048 <span class="keyword">if</span> ~isempty(options.simulator_options)
0049   studyinfo.simulations(sim_ind).simulator_options=options.simulator_options;
0050 <span class="keyword">end</span>
0051 <span class="keyword">if</span> ~isempty(options.solve_file)
0052   studyinfo.simulations(sim_ind).solve_file=options.solve_file;
0053 <span class="keyword">end</span>
0054 <span class="comment">% status-specific updates</span>
0055 <span class="keyword">if</span> ~isempty(options.status) &amp;&amp; ~isempty(studyinfo.simulations)
0056   <span class="keyword">if</span> options.verbose_flag
0057     fprintf(<span class="string">'setting status=''%s'' where sim_id=%g\n'</span>,options.status,options.process_id);
0058   <span class="keyword">end</span>
0059   studyinfo.simulations(sim_ind).status=options.status;
0060   <span class="keyword">switch</span> options.status
0061     <span class="keyword">case</span> <span class="string">'finished'</span>
0062       <span class="comment">% set stop_time</span>
0063       studyinfo.simulations(sim_ind).stop_time=datestr(now);
0064       studyinfo.simulations(sim_ind).simulator_options=options.simulator_options;
0065       <span class="comment">% save DynaSim model structure</span>
0066       <span class="keyword">if</span> isstruct(options.model)
0067         model=options.model;
0068         model_file=studyinfo.simulations(sim_ind).modified_model_file;
0069         save(model_file,<span class="string">'model'</span>,<span class="string">'-v7.3'</span>);
0070         <span class="keyword">if</span> options.verbose_flag
0071           fprintf(<span class="string">'model saved to %s\n'</span>,model_file);
0072         <span class="keyword">end</span>
0073       <span class="keyword">end</span>
0074       <span class="comment">% obtain and record machine info</span>
0075       <span class="keyword">try</span>
0076         [~,kernel] = system(<span class="string">'uname -v'</span>);
0077         [~,OS]     = system(<span class="string">'uname -o'</span>);
0078        [~,home]    = system(<span class="string">'echo $HOME'</span>);  <span class="comment">% home directory</span>
0079        [zzz, computername] = system(<span class="string">'hostname'</span>);           <span class="comment">% Uses linux system command to get the machine name of host.</span>
0080        [zzz, meminfo]      = system(<span class="string">'cat /proc/meminfo'</span>);  <span class="comment">% Uses linux system command to get a report on system memory</span>
0081        total_memory        = textscan(meminfo, <span class="string">'%*s %s %s'</span>, 1);  <span class="comment">% Parses the memory report for 2nd and 3rd space-delimited items of first line: memory amount.</span>
0082        total_memory        = [total_memory{1}{1} <span class="string">' '</span> total_memory{2}{1}];  <span class="comment">% Extracts the info from cell array to create char array.</span>
0083        [zzz, cpuinfo]      = system(<span class="string">'cat /proc/cpuinfo'</span>);  <span class="comment">% Uses linux system command to get a report on CPU types and speeds, etc.</span>
0084        cpuinfo             = textscan(cpuinfo, <span class="string">'%*s %*s %*s %*s %s %*s %*s %s'</span>, 1, <span class="string">'delimiter'</span>, <span class="string">'\n'</span>); <span class="comment">% Extracts lines 5 and 8 of report: Proc Type, and Cache</span>
0085        CPU_type            = textscan(cpuinfo{1}{1}, <span class="string">'%*s %s'</span>, 1, <span class="string">'delimiter'</span> , <span class="string">':'</span>); <span class="comment">% Parses line that includes CPU type.</span>
0086        CPU_type            = [strrep(CPU_type{1}{1},<span class="string">'  '</span>,<span class="string">''</span>) ];    <span class="comment">% ## Look for better way for this: collapse all repeated white space stretches to single spaces.</span>
0087        CPU_cache           = textscan(cpuinfo{2}{1}, <span class="string">'%*s %s'</span>, 1, <span class="string">'delimiter'</span> , <span class="string">':'</span>); <span class="comment">% Parses line that includes the cache info</span>
0088        CPU_cache           = [CPU_cache{1}{1} ];                                      <span class="comment">% Takes the cache info out of the cell array.</span>
0089        machine_info.host_name=strtrim(computername);
0090        machine_info.total_memory=total_memory;
0091        machine_info.CPU_type=CPU_type;
0092        machine_info.CPU_cache=CPU_cache;
0093        machine_info.num_cores=feature(<span class="string">'numcores'</span>);          <span class="comment">% Matlab command to get the number of processor cores on current host machine.</span>
0094        machine_info.operating_system=strtrim(OS);
0095        machine_info.kernel=strtrim(kernel);
0096        machine_info.home_dir=strtrim(home); 
0097        studyinfo.simulations(sim_ind).machine_info=machine_info;
0098       <span class="keyword">end</span>
0099       <span class="comment">% set duration</span>
0100       <span class="keyword">if</span> isempty(options.duration)
0101         <span class="comment">%t1=datevec(studyinfo.simulations(sim_ind).start_time);</span>
0102         <span class="comment">%t2=datevec(now);</span>
0103         duration=nan;<span class="comment">%etime(t2,t1);</span>
0104       <span class="keyword">else</span>
0105         duration=options.duration;
0106       <span class="keyword">end</span>
0107       studyinfo.simulations(sim_ind).duration=duration;
0108       <span class="comment">% copy cluster logs to study directory</span>
0109       <span class="keyword">if</span> isdir(studyinfo.simulations(sim_ind).batch_dir)
0110         log_dir=fullfile(studyinfo.study_dir,<span class="string">'logs'</span>);
0111         log_file=fullfile(studyinfo.simulations(sim_ind).batch_dir,<span class="string">'pbsout'</span>,[<span class="string">'sim_job'</span> num2str(options.process_id) <span class="string">'.out'</span>]);
0112         <span class="keyword">if</span> exist(log_file,<span class="string">'file'</span>)
0113           <span class="keyword">if</span> ~exist(log_dir,<span class="string">'dir'</span>)
0114             <span class="keyword">if</span> options.verbose_flag
0115               fprintf(<span class="string">'creating study logs directory: %s\n'</span>,log_dir);
0116             <span class="keyword">end</span>
0117             mkdir(log_dir);
0118           <span class="keyword">end</span>
0119           <span class="keyword">if</span> options.verbose_flag
0120             fprintf(<span class="string">'copying cluster log to study logs directory: %s\n'</span>,log_file);
0121           <span class="keyword">end</span>
0122           [success,msg]=copyfile(log_file,log_dir);
0123           <span class="keyword">if</span> ~success, error(msg); <span class="keyword">end</span>
0124         <span class="keyword">end</span>
0125       <span class="keyword">end</span>
0126     <span class="keyword">case</span> <span class="string">'failed'</span>
0127       <span class="comment">% set error_log</span>
0128       <span class="comment">%studyinfo.simulations(sim_ind).error_log=MException.last;</span>
0129         <span class="comment">% usage: DisplayError(studyinfo.simulations(k).error_log);</span>
0130       studyinfo.simulations(sim_ind).error_log=lasterr;
0131       <span class="comment">% copy cluster logs to study directory</span>
0132       <span class="keyword">if</span> isdir(studyinfo.simulations(sim_ind).batch_dir)
0133         log_dir=fullfile(studyinfo.study_dir,<span class="string">'logs'</span>);
0134         log_file=fullfile(studyinfo.simulations(sim_ind).batch_dir,<span class="string">'pbsout'</span>,[<span class="string">'sim_job'</span> num2str(options.process_id) <span class="string">'.out'</span>]);
0135         errfile=fullfile(studyinfo.simulations(sim_ind).batch_dir,<span class="string">'pbsout'</span>,[<span class="string">'sim_job'</span> num2str(options.process_id) <span class="string">'.err'</span>]);
0136         <span class="keyword">if</span> exist(log_file,<span class="string">'file'</span>)
0137           <span class="keyword">if</span> options.verbose_flag
0138             fprintf(<span class="string">'copying cluster logs to study logs directory...\n'</span>);
0139             fprintf(<span class="string">'\t%s\n'</span>,log_file);
0140           <span class="keyword">end</span>
0141           copyfile(log_file,log_dir);
0142         <span class="keyword">end</span>
0143         <span class="keyword">if</span> exist(errfile,<span class="string">'file'</span>)
0144           <span class="keyword">if</span> options.verbose_flag
0145             fprintf(<span class="string">'\t%s\n'</span>,errfile);
0146           <span class="keyword">end</span>
0147           copyfile(errfile,log_dir);
0148         <span class="keyword">end</span>
0149       <span class="keyword">end</span>
0150     <span class="keyword">otherwise</span>
0151       <span class="comment">% do nothing</span>
0152   <span class="keyword">end</span>
0153 <span class="keyword">end</span>
0154 <span class="comment">% update studyinfo.analysis</span>
0155 <span class="keyword">if</span> ~isempty(options.status) &amp;&amp; ~isempty(studyinfo.analysis)
0156   <span class="comment">% ...</span>
0157 <span class="keyword">end</span>
0158 <span class="comment">% check if study is complete; clean up if so (e.g, remove batchdirs)</span>
0159 <span class="keyword">if</span> all(strcmp(<span class="string">'finished'</span>,{studyinfo.simulations.status}))
0160   fprintf(<span class="string">'ALL SIMULATIONS HAVE FINISHED!\n'</span>);
0161   <span class="comment">% cleanup study</span>
0162   <span class="keyword">if</span> ~already_finished <span class="comment">% this is the first time the study has completed</span>
0163     <span class="keyword">if</span> 0
0164       <span class="comment">% cleanup batch directory</span>
0165       batch_dirs=unique({studyinfo.simulations.batch_dir});      
0166       log_dir=fullfile(studyinfo.study_dir,<span class="string">'logs'</span>);
0167       <span class="keyword">if</span> ~exist(log_dir,<span class="string">'dir'</span>)      
0168         <span class="keyword">if</span> options.verbose_flag
0169           fprintf(<span class="string">'creating log directory: %s\n'</span>,log_dir);
0170         <span class="keyword">end</span>    
0171         mkdir(log_dir);
0172       <span class="keyword">end</span>
0173       <span class="keyword">for</span> i=1:length(batch_dirs)
0174         <span class="keyword">if</span> ~exist(batch_dirs{i},<span class="string">'dir'</span>)
0175           <span class="keyword">continue</span>;
0176         <span class="keyword">end</span>
0177         <span class="comment">% copy log files from batch_dir to study_dir/logs</span>
0178         <span class="keyword">if</span> exist(fullfile(batch_dirs{i},<span class="string">'pbsout'</span>),<span class="string">'dir'</span>)
0179           <span class="keyword">if</span> options.verbose_flag
0180             fprintf(<span class="string">'copying log files from batch directory to study logs directory...\n'</span>);
0181           <span class="keyword">end</span>
0182           copyfile(fullfile(batch_dirs{i},<span class="string">'pbsout'</span>),log_dir);
0183         <span class="keyword">end</span>
0184         <span class="comment">% remove batch directory</span>
0185         <span class="keyword">if</span> options.verbose_flag
0186           fprintf(<span class="string">'removing batch directory: %s\n'</span>,batch_dirs{i});
0187         <span class="keyword">end</span>
0188         rmdir(batch_dirs{i},<span class="string">'s'</span>);
0189       <span class="keyword">end</span>
0190     <span class="keyword">end</span>
0191     <span class="comment">% email notification:</span>
0192     <span class="keyword">if</span> ~isempty(options.email)
0193       <span class="comment">%% Send Email</span>
0194       <span class="keyword">if</span> options.verbose_flag
0195         fprintf(<span class="string">'emailing notification of study completion to %s\n'</span>,options.email);
0196       <span class="keyword">end</span>
0197       email_attachments = {};
0198       reply_address = <span class="string">'batch@infinitebrain.org'</span>;
0199       <span class="keyword">try</span>
0200         setpref(<span class="string">'Internet'</span>,<span class="string">'SMTP_Server'</span>,<span class="string">'127.0.0.1'</span>); <span class="comment">% Sets the outgoing mail server - often the default 127.0.0.1</span>
0201         setpref(<span class="string">'Internet'</span>,<span class="string">'E_mail'</span>,reply_address);    <span class="comment">% Sets the email FROM/reply address for all outgoing email reports.</span>
0202         <span class="keyword">if</span> ~isempty(email_attachments)
0203           fprintf(<span class="string">'Files attached to report email:\n'</span>);
0204           email_attachments{:}
0205         <span class="keyword">end</span>
0206         sendmail(options.email,sprintf(<span class="string">'Analysis report for study: &quot;%s&quot;'</span>,studyinfo.study_dir),<span class="keyword">...</span>
0207            [10 options.prefix <span class="string">'. Max simulation time: '</span> sprintf(<span class="string">'%0.2f min'</span>,max([studyinfo.simulations.duration])/60) <span class="string">'. Browse models (results?) online at infinitebrain.org. Current time: '</span> datestr(now,31) <span class="string">'  (Automated message from DynaSim (github.com/dynasim/dynasim).)'</span> 10],<span class="keyword">...</span>
0208            {email_attachments{:}});  
0209         fprintf(<span class="string">'\nreport emailed successfully to: %s\n'</span>,options.email);
0210       <span class="keyword">catch</span> exception
0211         fprintf(<span class="string">'\nFailed to email report to: %s\n'</span>,options.email);
0212         <a href="DisplayError.html" class="code" title="function DisplayError(err)">DisplayError</a>(exception);
0213       <span class="keyword">end</span>
0214     <span class="keyword">end</span>  
0215   <span class="keyword">end</span>
0216 <span class="keyword">end</span>
0217 
0218 <span class="comment">% todo: auto-relaunch batch? ...</span>
0219 <span class="comment">% ...</span>
0220 
0221 <span class="comment">% update studyinfo on disk</span>
0222 <a href="StudyinfoIO.html" class="code" title="function studyinfo=StudyinfoIO(studyinfo,study_file,id,verbose_flag)">StudyinfoIO</a>(studyinfo.simulations(sim_ind),study_dir,options.process_id,options.verbose_flag);
0223 
0224 
0225 <span class="comment">%     case 'started'</span>
0226 <span class="comment">%       % set start_time</span>
0227 <span class="comment">%       studyinfo.simulations(sim_ind).start_time=datestr(now);</span>
0228 <span class="comment">%       studyinfo.simulations(sim_ind).simulator_options=options.simulator_options;</span>
0229 <span class="comment">%       % save DynaSim model structure</span>
0230 <span class="comment">%       if isstruct(options.model)</span>
0231 <span class="comment">%         model=options.model;</span>
0232 <span class="comment">%         model_file=studyinfo.simulations(sim_ind).modified_model_file;</span>
0233 <span class="comment">%         save(model_file,'model','-v7.3');</span>
0234 <span class="comment">%         if options.verbose_flag</span>
0235 <span class="comment">%           fprintf('model saved to %s\n',model_file);</span>
0236 <span class="comment">%         end</span>
0237 <span class="comment">%       end</span>
0238 <span class="comment">%        % obtain and record machine info</span>
0239 <span class="comment">%        try</span>
0240 <span class="comment">%          [~,kernel] = system('uname -v');</span>
0241 <span class="comment">%          [~,OS]     = system('uname -o');</span>
0242 <span class="comment">%         [~,home]    = system('echo $HOME');  % home directory</span>
0243 <span class="comment">%         [zzz, computername] = system('hostname');           % Uses linux system command to get the machine name of host.</span>
0244 <span class="comment">%         [zzz, meminfo]      = system('cat /proc/meminfo');  % Uses linux system command to get a report on system memory</span>
0245 <span class="comment">%         total_memory        = textscan(meminfo, '%*s %s %s', 1);  % Parses the memory report for 2nd and 3rd space-delimited items of first line: memory amount.</span>
0246 <span class="comment">%         total_memory        = [total_memory{1}{1} ' ' total_memory{2}{1}];  % Extracts the info from cell array to create char array.</span>
0247 <span class="comment">%         [zzz, cpuinfo]      = system('cat /proc/cpuinfo');  % Uses linux system command to get a report on CPU types and speeds, etc.</span>
0248 <span class="comment">%         cpuinfo             = textscan(cpuinfo, '%*s %*s %*s %*s %s %*s %*s %s', 1, 'delimiter', '\n'); % Extracts lines 5 and 8 of report: Proc Type, and Cache</span>
0249 <span class="comment">%         CPU_type            = textscan(cpuinfo{1}{1}, '%*s %s', 1, 'delimiter' , ':'); % Parses line that includes CPU type.</span>
0250 <span class="comment">%         CPU_type            = [strrep(CPU_type{1}{1},'  ','') ];    % ## Look for better way for this: collapse all repeated white space stretches to single spaces.</span>
0251 <span class="comment">%         CPU_cache           = textscan(cpuinfo{2}{1}, '%*s %s', 1, 'delimiter' , ':'); % Parses line that includes the cache info</span>
0252 <span class="comment">%         CPU_cache           = [CPU_cache{1}{1} ];                                      % Takes the cache info out of the cell array.</span>
0253 <span class="comment">%         machine_info.host_name=strtrim(computername);</span>
0254 <span class="comment">%         machine_info.total_memory=total_memory;</span>
0255 <span class="comment">%         machine_info.CPU_type=CPU_type;</span>
0256 <span class="comment">%         machine_info.CPU_cache=CPU_cache;</span>
0257 <span class="comment">%         machine_info.num_cores=feature('numcores');          % Matlab command to get the number of processor cores on current host machine.</span>
0258 <span class="comment">%         machine_info.operating_system=strtrim(OS);</span>
0259 <span class="comment">%         machine_info.kernel=strtrim(kernel);</span>
0260 <span class="comment">%         machine_info.home_dir=strtrim(home);</span>
0261 <span class="comment">%         studyinfo.simulations(sim_ind).machine_info=machine_info;</span>
0262 <span class="comment">%        end</span></pre></div>
<hr><address>Generated on Fri 24-Feb-2017 14:46:35 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2005</address>
</body>
</html>